<!DOCTYPE html>
<html>
    
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Tinder for Food</title>
        <link rel="stylesheet" href="style.css">
        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
        <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.4/jquery.mobile-1.4.4.min.css">
    </head>

    <body>
        <h1 class="center">Tinder For Food</h1>
            <div id="container">
                <div class="buddy" style="display: block;">
                    <div id="cuisinePic" style="display: block;"></div>
                        <div class="info">
                        <h2 id = "restaurantName">Restaurant Name</h2>

             <div>Type of Cuisine: </div>
             <div>Rating: &#9733 &#9733 &#9733 &#9734 &#9734</div>
             <div>Price Range: &25 - $55</div>

             <div class="buttons">
                 <button class="button left" id = "swipeLeft" onclick = "updataImage()"><left>X</left></button>
                 <button class="button middle"><center>+</center></button>
                 <button class="button right" id = "swipeRight" onclick = "getRestaurants()"><right>&#9829</right></button>
                 
                 <button id = "swipeRestLeft" onclick = "updateRestaurants()">Swipe restaurant left</button>
             </div>

            </div>
        </div>
    </div>

        <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
        <script src="js/scripts.js"></script>
        <script src="https://code.jquery.com/mobile/1.4.4/jquery.mobile-1.4.4.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://d3js.org/d3.v4.min.js"></script>
       
        <script>
            var cuisineCount = -1;
            var cuisine = [];       //array holding the cuisines
            var imageLink = [];     //array containting the image link to the cuisines
            var currentCuisine = "";
            d3.csv("foodTinder - Cuisine.csv",function(csv){
                    csv.map(function(d){
                        cuisine.push(d.CuisineName);
                        imageLink.push(d.CuisineImageLink);
                    })
            });
            function updataImage(){
                cuisineCount++;
                var imageUrl = "url("+imageLink[cuisineCount]+")";
                document.getElementById("cuisinePic").style.backgroundImage=imageUrl;
                currentCuisine = cuisine[cuisineCount];
                console.log(currentCuisine);
            }
           
            var allRestaurants = new Array(20);
            
            var chineseRestaurants = new Array(20);
            var italianRestaurants = new Array(20);
            d3.csv("foodTinder - Restaurant.csv",function(csv){
                
                var chineseIndexCount = 0;
                var attrCount = 0;
                
                var italianIndexCount = 0;
                csv.map(function(d){
                    if(d.Cuisine == "Chinese"){
                        chineseRestaurants[chineseIndexCount] = new Array(4);
                        chineseRestaurants[chineseIndexCount][attrCount] = d.RestaurantName;
                        attrCount++;
                        chineseRestaurants[chineseIndexCount][attrCount] = d.Rating;
                        attrCount++;
                        chineseRestaurants[chineseIndexCount][attrCount] = d.Price;
                        attrCount++;
                        chineseRestaurants[chineseIndexCount][attrCount] = d.RestaurantImageLink;
                        chineseIndexCount++;
                        attrCount = 0;
                    }else if(d.Cuisine == "Italian"){
                        italianRestaurants[italianIndexCount] = new Array(4);
                        italianRestaurants[italianIndexCount][attrCount] = d.RestaurantName;
                        attrCount++;
                        italianRestaurants[italianIndexCount][attrCount] = d.Rating;
                        attrCount++;
                        italianRestaurants[italianIndexCount][attrCount] = d.Price;
                        attrCount++;
                        italianRestaurants[italianIndexCount][attrCount] = d.RestaurantImageLink;
                        italianIndexCount++;
                        attrCount = 0;
                    }
                    
                })
            });
            
            allRestaurants[0] = chineseRestaurants;
            allRestaurants[1] = italianRestaurants;
            console.log(allRestaurants);
            var cuisineTypeIndex;
            function getRestaurants(){
                var cuisineTypes = ["Chinese","Italian","Korean", "Mediterranean", "American", "Cajun", "Greek", "Indian", "Thai", "Vietnamese"];
               
                for(i = 0; i < cuisineTypes.length; i++){
                    if(currentCuisine == cuisineTypes[i]){
                        cuisineTypeIndex = i;
                    }
                }
                console.log(currentCuisine+" cuisine selected, its cuisine index is "+cuisineTypeIndex);
                
                
            }
            restaurantsIndex = 0;
            function updateRestaurants(){
                var imageUrl = "url("+allRestaurants[cuisineTypeIndex][restaurantsIndex][3]+")";
                document.getElementById("cuisinePic").style.backgroundImage=imageUrl;
                
                document.getElementById("restaurantName").innerHTML = allRestaurants[cuisineTypeIndex][restaurantsIndex][0];
                restaurantsIndex++;
            }
             
            
        </script>
    </body>
</html>

