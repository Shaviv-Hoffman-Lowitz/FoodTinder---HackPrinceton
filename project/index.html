<!DOCTYPE html>
<html>
    
    <head>
        <meta charset="utf-8">
        
        <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;        user-scalable=0;" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
        
    
        <title>My Food Tinder</title>
        <meta name="description" content="An interactive getting started guide for Brackets.">
        <link rel="apple-touch-icon-precomposed" href="myicon.png"/>
       <link rel="stylesheet" href="style.css">
  
        <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.4/jquery.mobile-1.4.4.min.css">

    </head>
    <body>
       
        
    <h1 class="center">Tinder For Food</h1>
        

    <div id="container">

        <div class="buddy" style="display: block;">
            <div id ="avatar" style="display: block;"></div>
            <div class="info">
             <h2 id = "restaurantName"></h2>

             <div id = "cuisineType"></div>
             <div id = "rating"></div>
             <div id = "priceRange"></div>

             <div class="buttons">
                 <button class="button left"><left>X</left></button>
                 <button class="button middle"><center>+</center></button>
                 <button class="button right"><right>&#9829</right></button>
                 
                 
                 <button id = "swipeLeft" onclick = "updataImage()">Swipe Left</button>

                 <button id = "swipeRight" onclick = "getRestaurants()">Swipe Right</button>
                 
                 <button id = "swipeRestLeft" onclick = "updateRestaurants()">Swipe restaurant left</button>
             </div>

            </div>
        </div>
        
        

    </div>

        <script src="https://d3js.org/d3.v4.min.js"></script>
        <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
        <script src="https://code.jquery.com/mobile/1.4.4/jquery.mobile-1.4.4.min.js"></script>
        <script>
            
            $(document).ready(function(){

            $(".buddy").on("swiperight",function(){
                  $(this).addClass('rotate-left').delay(700).fadeOut(1);
                  $('.buddy').find('.status').remove();

                  $(this).append('<div class="status like">Like!</div>');      
                  if ( $(this).is(':last-child') ) {
                    $('.buddy:nth-child(1)').removeClass ('rotate-left rotate-right').fadeIn(300);
                   } else {
                      $(this).next().removeClass('rotate-left rotate-right').fadeIn(400);
                   }
            });  

            $(".buddy").on("swipeleft",function(){
                $(this).addClass('rotate-right').delay(700).fadeOut(1);
                $('.buddy').find('.status').remove();
                $(this).append('<div class="status dislike">Dislike!</div>');

                if ( $(this).is(':last-child') ) {
                 $('.buddy:nth-child(1)').removeClass ('rotate-left rotate-right').fadeIn(300);
                 } else {
                    $(this).next().removeClass('rotate-left rotate-right').fadeIn(400);
                } 
              });

            });

            
            
            var cuisineCount = -1;
            var cuisine = [];       //array holding the cuisines
            var imageLink = [];     //array containting the image link to the cuisines
            console.log(imageLink);
            var currentCuisine = "";
            d3.csv("foodTinder - Cuisine.csv",function(csv){
                    csv.map(function(d){
                        cuisine.push(d.CuisineName);
                        imageLink.push(d.CuisineImageLink);
                    })
            });
            function updataImage(){
                cuisineCount++;
                currentCuisine = cuisine[cuisineCount];
                console.log(cuisine[cuisineCount]);
                console.log(currentCuisine);
                console.log(imageLink[cuisineCount]);
                var imageUrl = "url("+imageLink[cuisineCount]+")";
                console.log(imageUrl);
                document.getElementById("avatar").style.backgroundImage=imageUrl;
                document.getElementById("cuisineType").innerHTML =  currentCuisine;;
            }
           
            var allRestaurants = new Array(20);
            
            var chineseRestaurants = new Array(20);
            var italianRestaurants = new Array(20);
            d3.csv("foodTinder - Restaurant.csv",function(csv){
                
                var chineseIndexCount = 0;
                var attrCount = 0;
                
                var italianIndexCount = 0;
                csv.map(function(d){
                    if(d.Cuisine == "Chinese"){
                        chineseRestaurants[chineseIndexCount] = new Array(4);
                        chineseRestaurants[chineseIndexCount][attrCount] = d.RestaurantName;
                        attrCount++;
                        chineseRestaurants[chineseIndexCount][attrCount] = d.Rating;
                        attrCount++;
                        chineseRestaurants[chineseIndexCount][attrCount] = d.Price;
                        attrCount++;
                        chineseRestaurants[chineseIndexCount][attrCount] = d.RestaurantImageLink;
                        chineseIndexCount++;
                        attrCount = 0;
                    }else if(d.Cuisine == "Italian"){
                        italianRestaurants[italianIndexCount] = new Array(4);
                        italianRestaurants[italianIndexCount][attrCount] = d.RestaurantName;
                        attrCount++;
                        italianRestaurants[italianIndexCount][attrCount] = d.Rating;
                        attrCount++;
                        italianRestaurants[italianIndexCount][attrCount] = d.Price;
                        attrCount++;
                        italianRestaurants[italianIndexCount][attrCount] = d.RestaurantImageLink;
                        italianIndexCount++;
                        attrCount = 0;
                    }
                    
                })
            });
            
            allRestaurants[0] = chineseRestaurants;
            allRestaurants[1] = italianRestaurants;
            console.log(allRestaurants);
            var cuisineTypeIndex;
            function getRestaurants(){
                var cuisineTypes = ["Chinese","Italian","Korean", "Mediterranean", "American", "Cajun", "Greek", "Indian", "Thai", "Vietnamese"];
               
                for(i = 0; i < cuisineTypes.length; i++){
                    if(currentCuisine == cuisineTypes[i]){
                        cuisineTypeIndex = i;
                    }
                }
                console.log(currentCuisine+" cuisine selected, its cuisine index is "+cuisineTypeIndex);
                
                
            }
    
            restaurantsIndex = 0;
            function updateRestaurants(){
                var imageUrl = "url("+allRestaurants[cuisineTypeIndex][restaurantsIndex][3]+")";
                document.getElementById("avatar").style.backgroundImage=imageUrl;
                
                document.getElementById("restaurantName").innerHTML = allRestaurants[cuisineTypeIndex][restaurantsIndex][0];
                document.getElementById("cuisineType").innerHTML =  currentCuisine;
                document.getElementById("rating").innerHTML = allRestaurants[cuisineTypeIndex][restaurantsIndex][1];
                document.getElementById("priceRange").innerHTML = allRestaurants[cuisineTypeIndex][restaurantsIndex][2];
                
                restaurantsIndex++;
            }
             
            
            
        </script>
             
       

    </body>
</html>

